(this.webpackJsonpmychat=this.webpackJsonpmychat||[]).push([[0],{37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(13),c=n.n(s),i=n(21),r=n(3),h=(n(37),n(28)),o=n(9),l=n(10),m=n(12),u=n(11),j=(n(38),n(39),n(1)),b=function(e){Object(m.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={message:"",length:e.props.length},e.handleSubmit=function(t){t.preventDefault(),e.createMessage()},e.createMessage=function(){var t=e.props,n=t.addMessage,a=t.nickname,s=t.length;n({nickname:a,message:e.state.message}),e.setState({message:"",length:s})},e.handleChange=function(t){var n=t.target.value,a=e.props.length-n.length;e.setState({message:n,length:a})},e.handleKeyUp=function(t){"Enter"===t.key&&e.createMessage()},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("form",{className:"form",onSubmit:this.handleSubmit,onKeyUp:this.handleKeyUp,children:[Object(j.jsx)("textarea",{require:!0,maxLength:this.props.length,onChange:this.handleChange,value:this.state.message,placeholder:"Start writing something ..."}),Object(j.jsx)("div",{className:"info",children:this.state.length}),Object(j.jsx)("button",{type:"submit",children:"Send"})]})}}]),n}(a.Component),d=b,p=function(e){var t=e.nickname,n=e.message;return(0,e.isUser)(t)?Object(j.jsx)("p",{className:"user-message",children:n}):Object(j.jsxs)("p",{className:"not-user-message",children:[Object(j.jsxs)("strong",{children:[t,": "]}),n]})},g=function(e){var t=e.channel;return Object(j.jsx)("header",{children:Object(j.jsx)("h1",{children:t})})},f=n(29),O=n.n(f),x=n(17),v=n.n(x),y=(n(42),v.a.initializeApp({apiKey:"AIzaSyBzXm11b9in2hn84hBmJt8GXCVqtJJiRC0",authDomain:"mychat-e82c8.firebaseapp.com",databaseURL:"https://mychat-e82c8-default-rtdb.europe-west1.firebasedatabase.app"}),O.a.createClass(v.a.database())),k=n(51),C=n(52),S=function(e){Object(m.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var s=arguments.length,c=new Array(s),i=0;i<s;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={messages:{},nickname:e.props.match.params.nickname,channel:e.props.match.params.channel},e.messageRef=Object(a.createRef)(),e.addMessage=function(t){var n=Object(h.a)({},e.state.messages);n["message-".concat(Date.now())]=t,Object.keys(n).slice(0,-10).forEach((function(e){n[e]=null})),e.setState({messages:n})},e.isUser=function(t){return t===e.state.nickname},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.ref=y.syncState("/".concat(this.state.channel),{context:this,state:"messages"})}},{key:"componentDidUpdate",value:function(){var e=this.messageRef.current;e.scrollTop=e.scrollHeight}},{key:"componentWillUnmount",value:function(){y.removeBinding(this.ref)}},{key:"render",value:function(){var e=this,t=Object.keys(this.state.messages).map((function(t){return Object(j.jsx)(k.a,{timeout:200,classNames:"fade",children:Object(j.jsx)(p,{nickname:e.state.messages[t].nickname,message:e.state.messages[t].message,isUser:e.isUser})},t)}));return Object(j.jsxs)("div",{className:"box",children:[Object(j.jsx)(g,{channel:this.state.channel}),Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"messages",ref:this.messageRef,children:Object(j.jsx)(C.a,{className:"message",children:t})}),Object(j.jsx)(d,{addMessage:this.addMessage,nickname:this.state.nickname,length:140})]})]})}}]),n}(a.Component),N=S,U=n(16),M=function(e){Object(m.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={nickname:"",channel:"",goToChat:!1},e.handleChange=function(t){var n=t.target,a=n.name,s=n.value;e.setState(Object(U.a)({},a,s))},e.handleSubmit=function(t){t.preventDefault(),e.setState({goToChat:!0})},e}return Object(l.a)(n,[{key:"render",value:function(){return this.state.goToChat?Object(j.jsx)(r.a,{push:!0,to:"/".concat(this.state.channel,"/").concat(this.state.nickname)}):Object(j.jsx)("div",{className:"connexionBox",children:Object(j.jsxs)("form",{className:"connexion",onSubmit:this.handleSubmit,children:[Object(j.jsx)("h1",{className:"connexionTitle",children:"MyChat"}),Object(j.jsx)("input",{name:"channel",value:this.state.channel,onChange:this.handleChange,pattern:"[A-Za-z]{1,}",type:"text",placeholder:"Channel",required:!0}),Object(j.jsx)("input",{name:"nickname",value:this.state.nickname,onChange:this.handleChange,pattern:"[A-Za-z]{1,}",type:"text",placeholder:"Nickname",required:!0}),Object(j.jsx)("button",{type:"submit",children:"Join"})]})})}}]),n}(a.Component),w=M,A=function(e){Object(m.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(j.jsx)("h2",{className:"notFound",children:"I think you got lost!"})}}]),n}(a.Component),D=A,J=function(){return Object(j.jsx)(i.a,{children:Object(j.jsxs)(r.d,{children:[Object(j.jsx)(r.b,{exact:!0,path:"/",component:w}),Object(j.jsx)(r.b,{path:"/:channel/:nickname",component:N}),Object(j.jsx)(r.b,{component:D})]})})};c.a.render(Object(j.jsx)(J,{}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.70d14d90.chunk.js.map